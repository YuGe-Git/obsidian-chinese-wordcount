/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ChineseWordCountPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var ChineseWordCountPlugin = class extends import_obsidian.Plugin {
  // 引用状态栏项的 HTML 元素
  // 插件加载时调用的方法
  async onload() {
    this.addStatusBar();
    this.updateWordCount();
    this.registerEvent(this.app.workspace.on("editor-change", this.updateWordCount.bind(this)));
    this.registerEvent(this.app.workspace.on("file-open", this.updateWordCount.bind(this)));
    this.registerEvent(this.app.workspace.on("active-leaf-change", this.updateWordCount.bind(this)));
  }
  // 插件卸载时调用的方法
  onunload() {
    var _a;
    (_a = this.statusBarItem) == null ? void 0 : _a.remove();
  }
  // 向 Obsidian 的状态栏添加一个状态栏项，并固定在最左边
  addStatusBar() {
    this.statusBarItem = this.addStatusBarItem();
    this.statusBarItem.setText("\u672C\u7AE0\u5B57\u7B26: 0");
    this.statusBarItem.style.marginRight = "auto";
  }
  // 计算给定文本中不包含空白字符的字符总数的方法
  countNonWhitespaceCharacters(text) {
    const matches = text.match(/\S/g);
    return matches ? matches.length : 0;
  }
  // 更新状态栏中显示的字符数
  updateWordCount() {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (view) {
      const editor = view.editor;
      const content = editor.getValue();
      const count = this.countNonWhitespaceCharacters(content);
      this.statusBarItem.setText(`\u672C\u7AE0\u5B57\u7B26: ${count}`);
    } else {
      this.statusBarItem.setText("\u672C\u7AE0\u5B57\u7B26: 0");
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gXHU0RUNFIE9ic2lkaWFuIEFQSSBcdTVCRkNcdTUxNjVcdTVGQzVcdTg5ODFcdTc2ODRcdTdDN0JcdTU0OENcdTYzQTVcdTUzRTNcclxuaW1wb3J0IHsgQXBwLCBNYXJrZG93blZpZXcsIFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8vIFx1NUI5QVx1NEU0OVx1NEUzQlx1NjNEMlx1NEVGNlx1N0M3QlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGluZXNlV29yZENvdW50UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgIHN0YXR1c0Jhckl0ZW06IEhUTUxFbGVtZW50OyAvLyBcdTVGMTVcdTc1MjhcdTcyQjZcdTYwMDFcdTY4MEZcdTk4NzlcdTc2ODQgSFRNTCBcdTUxNDNcdTdEMjBcclxuXHJcbiAgICAvLyBcdTYzRDJcdTRFRjZcdTUyQTBcdThGN0RcdTY1RjZcdThDMDNcdTc1MjhcdTc2ODRcdTY1QjlcdTZDRDVcclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICB0aGlzLmFkZFN0YXR1c0JhcigpOyAvLyBcdTZERkJcdTUyQTBcdTcyQjZcdTYwMDFcdTY4MEZcdTk4NzlcclxuICAgICAgICB0aGlzLnVwZGF0ZVdvcmRDb3VudCgpOyAvLyBcdTU0MkZcdTUyQThcdTY1RjZcdTUyMzdcdTY1QjBcdTVCNTdcdTdCMjZcdTY1NzBcclxuXHJcbiAgICAgICAgLy8gXHU2Q0U4XHU1MThDXHU3RjE2XHU4RjkxXHU1NjY4XHU1MTg1XHU1QkI5XHU1M0Q4XHU1MzE2XHUzMDAxXHU2NTg3XHU0RUY2XHU2MjUzXHU1RjAwXHU1NDhDXHU2RDNCXHU1MkE4XHU3QTk3XHU1M0UzXHU1M0Q4XHU1MzE2XHU0RThCXHU0RUY2XHVGRjBDXHU0RUU1XHU1MkE4XHU2MDAxXHU2NkY0XHU2NUIwXHU1QjU3XHU3QjI2XHU2NTcwXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLWNoYW5nZScsIHRoaXMudXBkYXRlV29yZENvdW50LmJpbmQodGhpcykpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW9wZW4nLCB0aGlzLnVwZGF0ZVdvcmRDb3VudC5iaW5kKHRoaXMpKSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgdGhpcy51cGRhdGVXb3JkQ291bnQuYmluZCh0aGlzKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NjNEMlx1NEVGNlx1NTM3OFx1OEY3RFx1NjVGNlx1OEMwM1x1NzUyOFx1NzY4NFx1NjVCOVx1NkNENVxyXG4gICAgb251bmxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtPy5yZW1vdmUoKTsgLy8gXHU3OUZCXHU5NjY0XHU3MkI2XHU2MDAxXHU2ODBGXHU5ODc5XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU1NDExIE9ic2lkaWFuIFx1NzY4NFx1NzJCNlx1NjAwMVx1NjgwRlx1NkRGQlx1NTJBMFx1NEUwMFx1NEUyQVx1NzJCNlx1NjAwMVx1NjgwRlx1OTg3OVx1RkYwQ1x1NUU3Nlx1NTZGQVx1NUI5QVx1NTcyOFx1NjcwMFx1NURFNlx1OEZCOVxyXG4gICAgYWRkU3RhdHVzQmFyKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpOyAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTY1QjBcdTc2ODRcdTcyQjZcdTYwMDFcdTY4MEZcdTk4NzlcclxuICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0uc2V0VGV4dCgnXHU2NzJDXHU3QUUwXHU1QjU3XHU3QjI2OiAwJyk7IC8vIFx1OEJCRVx1N0Y2RVx1NTIxRFx1NTlDQlx1NjU4N1x1NjcyQ1xyXG4gICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbS5zdHlsZS5tYXJnaW5SaWdodCA9ICdhdXRvJzsgLy8gXHU0RjdGXHU3NTI4IENTUyBcdTVDMDZcdTUxNzZcdTU2RkFcdTVCOUFcdTU3MjhcdTY3MDBcdTVERTZcdThGQjlcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdThCQTFcdTdCOTdcdTdFRDlcdTVCOUFcdTY1ODdcdTY3MkNcdTRFMkRcdTRFMERcdTUzMDVcdTU0MkJcdTdBN0FcdTc2N0RcdTVCNTdcdTdCMjZcdTc2ODRcdTVCNTdcdTdCMjZcdTYwM0JcdTY1NzBcdTc2ODRcdTY1QjlcdTZDRDVcclxuICAgIGNvdW50Tm9uV2hpdGVzcGFjZUNoYXJhY3RlcnModGV4dDogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEZcdTUzMzlcdTkxNERcdTYyNDBcdTY3MDlcdTk3NUVcdTdBN0FcdTc2N0RcdTVCNTdcdTdCMjZcclxuICAgICAgICBjb25zdCBtYXRjaGVzID0gdGV4dC5tYXRjaCgvXFxTL2cpO1xyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NTMzOVx1OTE0RFx1N0VEM1x1Njc5Q1x1RkYwQ1x1OEZENFx1NTZERVx1NTMzOVx1OTE0RFx1NjU3MFx1N0VDNFx1NzY4NFx1OTU3Rlx1NUVBNlx1RkYwQ1x1NTQyNlx1NTIxOVx1OEZENFx1NTZERTBcclxuICAgICAgICByZXR1cm4gbWF0Y2hlcyA/IG1hdGNoZXMubGVuZ3RoIDogMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTcyQjZcdTYwMDFcdTY4MEZcdTRFMkRcdTY2M0VcdTc5M0FcdTc2ODRcdTVCNTdcdTdCMjZcdTY1NzBcclxuICAgIHVwZGF0ZVdvcmRDb3VudCgpIHtcclxuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTsgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2RkMwXHU2RDNCXHU3Njg0IE1hcmtkb3duIFx1ODlDNlx1NTZGRVxyXG4gICAgICAgIGlmICh2aWV3KSB7IC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NkZDMFx1NkQzQlx1NzY4NCBNYXJrZG93biBcdTg5QzZcdTU2RkVcclxuICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gdmlldy5lZGl0b3I7IC8vIFx1ODNCN1x1NTNENlx1N0YxNlx1OEY5MVx1NTY2OFx1NUI5RVx1NEY4QlxyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7IC8vIFx1ODNCN1x1NTNENlx1N0YxNlx1OEY5MVx1NTY2OFx1NEUyRFx1NzY4NFx1NUY1M1x1NTI0RFx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMuY291bnROb25XaGl0ZXNwYWNlQ2hhcmFjdGVycyhjb250ZW50KTsgLy8gXHU4QkExXHU3Qjk3XHU5NzVFXHU3QTdBXHU3NjdEXHU1QjU3XHU3QjI2XHU3Njg0XHU2NTcwXHU5MUNGXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbS5zZXRUZXh0KGBcdTY3MkNcdTdBRTBcdTVCNTdcdTdCMjY6ICR7Y291bnR9YCk7IC8vIFx1NjZGNFx1NjVCMFx1NzJCNlx1NjAwMVx1NjgwRlx1NjU4N1x1NjcyQ1x1NEUzQVx1NjVCMFx1NzY4NFx1NUI1N1x1N0IyNlx1NjU3MFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbS5zZXRUZXh0KCdcdTY3MkNcdTdBRTBcdTVCNTdcdTdCMjY6IDAnKTsgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU2RkMwXHU2RDNCXHU3Njg0XHU4OUM2XHU1NkZFXHVGRjBDXHU2NjNFXHU3OTNBMFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0Esc0JBQTBDO0FBRzFDLElBQXFCLHlCQUFyQixjQUFvRCx1QkFBTztBQUFBO0FBQUE7QUFBQSxFQUl2RCxNQUFNLFNBQVM7QUFDWCxTQUFLLGFBQWE7QUFDbEIsU0FBSyxnQkFBZ0I7QUFHckIsU0FBSyxjQUFjLEtBQUssSUFBSSxVQUFVLEdBQUcsaUJBQWlCLEtBQUssZ0JBQWdCLEtBQUssSUFBSSxDQUFDLENBQUM7QUFDMUYsU0FBSyxjQUFjLEtBQUssSUFBSSxVQUFVLEdBQUcsYUFBYSxLQUFLLGdCQUFnQixLQUFLLElBQUksQ0FBQyxDQUFDO0FBQ3RGLFNBQUssY0FBYyxLQUFLLElBQUksVUFBVSxHQUFHLHNCQUFzQixLQUFLLGdCQUFnQixLQUFLLElBQUksQ0FBQyxDQUFDO0FBQUEsRUFDbkc7QUFBQTtBQUFBLEVBR0EsV0FBVztBQW5CZjtBQW9CUSxlQUFLLGtCQUFMLG1CQUFvQjtBQUFBLEVBQ3hCO0FBQUE7QUFBQSxFQUdBLGVBQWU7QUFDWCxTQUFLLGdCQUFnQixLQUFLLGlCQUFpQjtBQUMzQyxTQUFLLGNBQWMsUUFBUSw2QkFBUztBQUNwQyxTQUFLLGNBQWMsTUFBTSxjQUFjO0FBQUEsRUFDM0M7QUFBQTtBQUFBLEVBR0EsNkJBQTZCLE1BQXNCO0FBRS9DLFVBQU0sVUFBVSxLQUFLLE1BQU0sS0FBSztBQUVoQyxXQUFPLFVBQVUsUUFBUSxTQUFTO0FBQUEsRUFDdEM7QUFBQTtBQUFBLEVBR0Esa0JBQWtCO0FBQ2QsVUFBTSxPQUFPLEtBQUssSUFBSSxVQUFVLG9CQUFvQiw0QkFBWTtBQUNoRSxRQUFJLE1BQU07QUFDTixZQUFNLFNBQVMsS0FBSztBQUNwQixZQUFNLFVBQVUsT0FBTyxTQUFTO0FBQ2hDLFlBQU0sUUFBUSxLQUFLLDZCQUE2QixPQUFPO0FBQ3ZELFdBQUssY0FBYyxRQUFRLDZCQUFTLE9BQU87QUFBQSxJQUMvQyxPQUFPO0FBQ0gsV0FBSyxjQUFjLFFBQVEsNkJBQVM7QUFBQSxJQUN4QztBQUFBLEVBQ0o7QUFDSjsiLAogICJuYW1lcyI6IFtdCn0K
